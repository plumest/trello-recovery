(function(e){function t(t){for(var r,a,s=t[0],i=t[1],u=t[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/trello-recovery/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("Trello Recovery")]),n("RecoveryForm",{attrs:{secretKey:e.secretKey,secretToken:e.secretToken,db:e.db,canEdit:!e.secretKey&&!e.secretToken},on:{submitted:e.onSubmit}}),e.url?n("Content",{attrs:{url:e.url,secretKey:e.secretKey,secretToken:e.secretToken}}):e._e()],1)},c=[],a=(n("d3b7"),n("96cf"),n("1da1")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{on:{submit:e.onSubmit}},[e.options?e._e():n("b-form-group",{attrs:{label:"Recovery type"}},[n("b-form-radio-group",{attrs:{id:"btn-radios",options:e.options,buttons:"","button-variant":"outline-primary",size:"sm",name:"radio-btn-outline"},model:{value:e.isLastChange,callback:function(t){e.isLastChange=t},expression:"isLastChange"}})],1),n("b-form-group",{attrs:{label:"Card link (Click on the card then copy url)"}},[n("b-form-input",{staticClass:"textForm",attrs:{placeholder:"Enter the card's url",required:""},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}})],1),e.canEdit?n("b-form-group",{attrs:{label:"Key & Token"}},[n("a",{attrs:{href:"https://trello.com/app-key",target:"_blank"}},[e._v("You can get them here")]),n("b-form-input",{staticClass:"textForm",attrs:{placeholder:"Enter the API key",required:""},model:{value:e.secretKey,callback:function(t){e.secretKey=t},expression:"secretKey"}}),n("b-form-input",{staticClass:"textForm",attrs:{placeholder:"Enter the API token",required:""},model:{value:e.secretToken,callback:function(t){e.secretToken=t},expression:"secretToken"}})],1):n("b-button",{on:{click:e.displaySecretForm}},[e._v("Edit Key & Token")]),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Recovery")])],1)],1)},i=[],u=(n("fb6a"),n("9911"),{props:{db:Object,secretKey:String,secretToken:String,canEdit:Boolean},data:function(){return{link:"",cardId:"",recoveryUrl:"",isLastChange:!0,options:[{text:"Last Change",value:!0},{text:"All Change",value:!1}],isShow:!1}},methods:{displaySecretForm:function(){this.canEdit=!0},onSubmit:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.preventDefault(),t.cardId=t.link.slice(21,29),r={url:"https://trello.com/1/cards/".concat(t.cardId,"/actions?filter=updateCard:desc"),secretKey:t.secretKey,secretToken:t.secretToken},o=r.secretKey,c=r.secretToken,t.addSecretToDb({secretKey:o,secretToken:c}),t.$emit("submitted",r);case 6:case"end":return n.stop()}}),n)})))()},addSecretToDb:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=t.db.transaction(["secret"],"readwrite");r.oncomplete=function(){n()};var o=r.objectStore("secret");o.add(e)})));case 1:case"end":return n.stop()}}),n)})))()}}}),l=u,d=(n("a3ec"),n("2877")),f=Object(d["a"])(l,s,i,!1,null,"16ac63ff",null),p=f.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLoading?e._e():n("div",{staticClass:"mb-3"},[e.isValid?n("div",[n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.compiledMarkdown)}}),n("b-button",{attrs:{variant:"primary"},on:{click:e.copy}},[e._v("Copy")])],1):n("p",{staticClass:"text-danger"},[e._v("Please Enter the valid Url, Key & Token")])])},m=[],v=(n("99af"),n("bc3a")),h=n.n(v),g=n("0e54"),y=n.n(g),k={name:"Content",props:{url:String,secretKey:String,secretToken:String},data:function(){return{content:"",isValid:!1,isLoading:!0}},mounted:function(){var e=this;h.a.get("".concat(this.url,"&key=").concat(this.secretKey,"&token=").concat(this.secretToken)).then((function(t){return e.content=t.data[0].data.old.desc})).then((function(){return e.isValid=!0})).catch((function(e){return console.log(e)})).finally((function(){return e.isLoading=!1}))},methods:{copy:function(){this.$clipboard(this.content)}},computed:{compiledMarkdown:function(){return y()(this.content,{mangle:!0,smartLists:!0,smartypants:!0,gfm:!0,breaks:!0})}}},w=k,T=(n("6f29"),Object(d["a"])(w,b,m,!1,null,"4ee27104",null)),x=T.exports,S={name:"App",components:{RecoveryForm:p,Content:x},data:function(){return{db:null,url:"",secretKey:"",secretToken:""}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return e.db=t.sent,t.next=5,e.getSecretFromDb();case 5:n=t.sent,r=n.secretKey,o=n.secretToken,e.secretKey=r,e.secretToken=o;case 10:case"end":return t.stop()}}),t)})))()},methods:{onSubmit:function(e){this.url=e.url,this.secretKey=e.secretKey,this.secretToken=e.secretToken},getDb:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=window.indexedDB.open("keyToken");n.onerror=function(e){console.log("Error opening db",e),t("Error")},n.onsuccess=function(t){console.log(t.target.result),e(t.target.result)},n.onupgradeneeded=function(e){console.log("onupgradeneeded");var t=e.target.result;t.createObjectStore("secret",{autoIncrement:!0,keyPath:"id"})}})));case 1:case"end":return e.stop()}}),e)})))()},getSecretFromDb:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n=e.db.transaction(["secret"],"readonly");n.oncomplete=function(){console.log(o),t(o)};var r=n.objectStore("secret"),o={};r.openCursor().onsuccess=function(e){var t=e.target.result;t&&(o=t.value,t.continue())}})));case 1:case"end":return t.stop()}}),t)})))()}}},j=S,K=(n("034f"),Object(d["a"])(j,o,c,!1,null,null,null)),_=K.exports,O=n("9483");Object(O["a"])("".concat("/trello-recovery/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var C=n("4ae6"),E=n.n(C),P=n("5f5b"),R=n("b1e0"),F=n("2924"),L=n("8226"),D=n("4797");r["default"].use(P["a"]),r["default"].use(R["a"]),r["default"].use(E.a),r["default"].component("b-form-radio-group",F["a"]),r["default"].component("b-form-group",L["a"]),r["default"].component("b-form-input",D["a"]),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(_)}}).$mount("#app")},"6f29":function(e,t,n){"use strict";var r=n("d4a9"),o=n.n(r);o.a},"85ec":function(e,t,n){},a3ec:function(e,t,n){"use strict";var r=n("c533"),o=n.n(r);o.a},c533:function(e,t,n){},d4a9:function(e,t,n){}});
//# sourceMappingURL=app.d262579b.js.map